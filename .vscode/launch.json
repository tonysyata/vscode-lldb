{
	"version": "0.2.0",
	"configurations": [
		{
			"name": "extension",
			"preLaunchTask": "npm: build",
			"type": "extensionHost",
			"request": "launch",
			"runtimeExecutable": "${execPath}",
			"args": [
				"--extensionDevelopmentPath=${workspaceRoot}"
			],
			"stopOnEntry": false,
			"sourceMaps": true,
			"outFiles": [
				"${workspaceRoot}/out/**/*.js"
			]
		},
		{
			"name": "launch adapter",
			"type": "python",
			"request": "launch",
			"pythonPath": "${workspaceFolder}/tools/debug_adapter.py",
			"program": "${workspaceFolder}"
		},
		{
			"name": "codelldb",
			"preLaunchTask": "build codelldb",
			"type": "lldb",
			"request": "launch",
			"program": "${workspaceFolder}/out/adapter2/codelldb",
			"args": [
				"--multi-session"
			],
			"env": {
				//"PATH": "${env:PATH};C:\\Python37-64",
				"RUST_LOG": "error,codelldb=debug",
				"RUST_LOG_STYLE": "always",
				"RUST_BACKTRACE": "1",
			},
			"sourceLanguages": [
				"cpp", "rust"
			],
			"terminal": "integrated"
		},
		{
			"name": "codelldb attach",
			"type": "lldb",
			"request": "attach",
			"program": "${workspaceFolder}/out/adapter2/codelldb",
			"sourceLanguages": [
				"cpp", "rust"
			],
		},
		{
			"name": "codelldb cppvsdbg",
			"type": "cppvsdbg",
			"request": "launch",
			"preLaunchTask": "build codelldb",
			"program":  "${workspaceFolder}/out/adapter2/codelldb.exe",
			"args": ["--multi-session"],
			"stopAtEntry": false,
			"cwd": "${workspaceFolder}",
			"environment": [
				{ "name": "PATH", "value":"${env:PATH};C:\\Python36-64;C:\\mingw-w64\\x86_64-8.1.0-win32-seh-rt_v6-rev0\\mingw64\\bin" },
				{ "name":"RUST_LOG", "value":"error,codelldb=debug"},
				{ "name":"RUST_LOG_STYLE", "value":"always"},
				{ "name":"RUST_BACKTRACE", "value":"full"},
			],
			//"externalConsole": true,
			"sourceFileMap": { "C:\\_work\\4\\s": "c:\\NW\\cpython" }
		},
		{
			"name": "threading cppvsdbg",
			"type": "cppvsdbg",
			"request": "launch",
			"preLaunchTask": "build threading",
			"program": "${workspaceRoot}/target/debug/threading.exe",
			"environment": [
				{ "name": "PATH", "value":"${env:PATH};C:\\Python37-64;C:\\NW\ll\\build\\bin" }
			],
			"externalConsole": true,
			"sourceFileMap": { "C:\\_work\\4\\s": "c:\\NW\\cpython" },
			"symbolSearchPath": "srv*c:\\symbols*https://msdl.microsoft.com/download/symbols;C:\\NW\\ll\\build\\bin"
		},
		{
			"name": "test codelldb",
			"preLaunchTask": "cargo build",
			"type": "lldb",
			"request": "launch",
			"cargo":{
				"args": [
					"test",
					"--lib",
					"--no-run",
					"-p", "codelldb"
				]
			},
			"args": ["--nocapture", "--test-threads=1"],
			"env": {
				"PATH": "${env:PATH}:/usr/lib/llvm-6.0/bin",
				"RUST_LOG": "debug",
				"RUST_BACKTRACE": "1",
			},
			"sourceLanguages": [
				"cpp", "rust"
			],
			"terminal": "integrated"
		},
		{
			"name": "attach to adapter",
			"type": "python",
			"request": "attach",
			"host": "127.0.0.1",
			"port": 3000,
			"secret": "CodeLLDB",
		},
		{
			"name": "tests",
			"preLaunchTask": "npm: build",
			"type": "node",
			"request": "launch",
			"cwd": "${workspaceRoot}",
			"program": "${workspaceRoot}/node_modules/mocha/bin/_mocha",
			"runtimeArgs": [
				"--nolazy",
				"--harmony"
			],
			"args": [
				"-u", "tdd",
				"--timeout", "999999",
				"--colors",
				//"-g", "entry",
				"./out/tests"
			],
			"env": {
				"LLDB_LOGFILE": "${workspaceRoot}/adapter.log",
				"LLDB_EXECUTABLE": "${config:lldb.executable}",
			},
			"sourceMaps": true,
			"outFiles": [
				"${workspaceRoot}/out/**/*.js"
			]
		},
		{
			"type": "lldb",
			"request": "attach",
			"name": "Attach by pid",
			"pid": "${command:pickMyProcess}"
		},
	]
}
